= parsecvs(1) =
:doctype: manpage

== NAME ==
parsecvs - fast-export the contents of a CVS repository 

== SYNOPSIS ==
*parsecvs*
    [-h] [-w 'fuzz'] [-g] [-v] [-A authormap] [-R] [-V] [-T] [--reposurgeon]

== DESCRIPTION ==
parsecvs tries to group the per-file commits and tags in a CVS project
repository into per-project changeset commits with common metadata, in
the style of Subversion and later version-control systems.

* Each patchset becomes a commit.

* CVS tags become git lightweight tags.

* The HEAD branch is renamed to 'master'.

* Other tag and branch names are sanitized to be legal for git;
  the characters ~^\*? are removed.

* Since .cvsignore files have a syntax upward-compatible with that
  of .gitignore files, they're renamed.

== OPTIONS ==
-h::
Sisplay usage summary.
-w 'fuzz'::
Set the timestamp fuzz factor for identifying patch sets in seconds.
The default is 300 seconds.
-g::
generate a picture of the commit graph in the DOT
-A 'authormap'::
Apply an author-map file to the attribution lines. Each line must be
of the form
+
------------------------------------------------------
ferd = Ferd J. Foonly <foonly@foo.com> America/Chicago
------------------------------------------------------
+
and will be applied to map the Unix username 'ferd' to the DVCS-style
user identity specified after the equals sign.  The timezone field
(after > and whitespace) is optional and (if present) is used to set
the timezone offset to be attached to the date; acceptable formats for
the timezone field are anything that can be in the TZ environment
variable, including a [+-]hhmm offst. Whitespace around the equals
sign is stripped.  Lines beginning with a # or not containing an
equals sign are silently ignored.
-R 'revmap'::
Write a revision map to the specified argument filename.  Each line of
the revision map consists of three whitespace-separated fields: a
filename, an RCS revision number, and the mark of the commit to which
that filename-revision pair was assigned. [FIXME: Not yet implemented].
-v::
Show verbose progress messages mainly of interest to developers.
-T::
Force deterministic dates for regression testing. Each patchset will
have a monotonic-increasing attributed date computed from its mark in
the output stream - the mark value times the commit time window times two.
--reposurgeon::
Emit for each commit a list of the CVS file:revision pairs composing it as a
bzr-style commit property named "cvs-revisions".  From version 2.12
onward, reposurgeon can interpret these and use them as hints for
reference-lifting. [FIXME: Not yet implemented]
-V::
Emit the program version and exit.

== SEE ALSO ==
cvs(1)

== CVS LIMITATIONS ==
Translating CVS repositories to the generic DVCS model expressed by
import streams is not merely difficult and messy, there are weird
CVS cases that cannot be correctly translated at all.  parsecvs will try to
warn you about these cases rather than silently producing broken or
incomplete translations.

CVS-NT and versions of GNU CVS after 1.12 (2004) added a changeset
commit-id to file metadata. Older sections of CVS history without
these are vulnerable to various problems caused by clock skew between
clients; this used to be relatively common for multiple reasons,
including less pervasive use of NTP clock synchronization. parsecvs will
warn you when it sees such a section in your history. When it does,
[FIXME: Warning not yet implemented] these caveats apply:

* If timestamps of commits in the CVS repository were not stable
enough to be used for ordering commits, changes may be reported in the
wrong order.

* If the timestamp order of different files crosses the revision order
within the commit-matching time window, the order of commits reported 
may be wrong.

These problems cannot be fixed in parsecvs; they are inherent to CVS.

== PARSECVS LIMITATIONS ==
FIXME: What does it do with unresolved tags?

== REPORTING BUGS ==
Report bugs to Eric S. Raymond <esr@thyrsus.com>.  The analysis stage was
mostly by Keith Packard, ESR dusted it off and made it generate a fast-
impoport stream.  The project page is at
http://catb.org/~esr/parsecvs

== SEE ALSO ==
cvsps(1)
